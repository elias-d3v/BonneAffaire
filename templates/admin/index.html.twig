{% extends 'base.html.twig' %}

{% block body %}
<h1>Administration - Dashboard</h1>

<h2>Utilisateurs</h2>
<table border="1" cellpadding="5">
    <tr>
        <th>ID</th>
        <th>Nom</th>
        <th>Email</th>
        <th>Actions</th>
    </tr>
    {% for user in users %}
        <tr>
            <td>{{ user.id }}</td>
            <td>{{ user.name }}</td>
            <td>{{ user.email }}</td>
            <td>
                <a href="{{ path('admin_user_delete', {id: user.id}) }}" 
                   onclick="return confirm('Supprimer cet utilisateur ?')">‚ùå Supprimer</a>
            </td>
        </tr>
    {% else %}
        <tr><td colspan="4">Aucun utilisateur</td></tr>
    {% endfor %}
</table>

<h2>Annonces</h2>
<table border="1" cellpadding="5">
    <tr>
        <th>ID</th>
        <th>Titre</th>
        <th>Prix</th>
        <th>Status</th>
        <th>Actions</th>
    </tr>
    {% for post in posts %}
        <tr>
            <td>{{ post.id }}</td>
            <td>{{ post.title }}</td>
            <td>{{ post.price }} ‚Ç¨</td>
            <td>{{ post.status }}</td>
            <td>
                {% if post.status != 'validated' %}
                    <a href="{{ path('admin_post_validate', {id: post.id}) }}">‚úÖ Valider</a>
                {% endif %}
                <a href="{{ path('admin_post_delete', {id: post.id}) }}" 
                   onclick="return confirm('Supprimer cette annonce ?')">‚ùå Supprimer</a>
            </td>
        </tr>
    {% else %}
        <tr><td colspan="5">Aucune annonce</td></tr>
    {% endfor %}
</table>

<h2>Signalements</h2>
<table border="1" cellpadding="5">
    <tr>
        <th>ID</th>
        <th>Annonce</th>
        <th>Reporter</th>
        <th>Statut</th>
        <th>Actions</th>
    </tr>
    {% for report in reports %}
        <tr>
            <td>{{ report.id }}</td>
            <td>{{ report.post.title }}</td>
            <td>{{ report.reporter.name }}</td>
            <td>{{ report.isHandled ? '‚úÖ Trait√©' : '‚è≥ En attente' }}</td>
            <td>
                {% if not report.isHandled %}
                    <a href="{{ path('admin_report_handle', {id: report.id}) }}">üìå Marquer comme trait√©</a>
                {% endif %}
            </td>
        </tr>
    {% else %}
        <tr><td colspan="5">Aucun signalement</td></tr>
    {% endfor %}
</table>

<a href="{{ path('admin_stats') }}">üìä Voir les statistiques</a>
{% endblock %}
